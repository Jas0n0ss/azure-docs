<!-- ARM: tested -->

<properties
	pageTitle="创建多个虚拟机 | Azure"
	description="用于在 Windows 上创建多个虚拟机的选项"
	services="virtual-machines-windows"
	documentationCenter=""
	authors="gbowerman"
	manager="timlt"
	editor=""
	tags="azure-resource-manager"/>

<tags
	ms.service="virtual-machines-windows"
	ms.date="05/02/2016"
	wacn.date="06/20/2016"/>

# 创建多个 Azure 虚拟机

在很多情况下，需要创建大量类似的虚拟机 (VM)。部分示例包括高性能计算 (HPC)、大规模数据分析、可缩放且通常无状态的中间层或后端服务器（例如 Web 服务器），以及分布式数据库。

本文介绍用于在 Azure 中创建多个 VM 的可用选项。这些选项超越了手动创建一系列 VM 的简单方案。在创建数量较多的 VM 时，如果按照平时使用的过程将无法适当缩放。

创建许多类似 VM 的方法之一是使用 Azure Resource Manager _资源循环_构造。

## 资源循环

资源循环是 Azure Resource Manager 模板中的速记语法。资源循环可在循环中创建一组设置相似的资源。可以使用资源循环来创建多个存储帐户、网络接口或虚拟机。

## 规模的挑战

尽管资源循环可以使大规模构建云基础结构变得更轻松，同时也可以生成更精简的模板，但仍有一些难题有待克服。例如，如果你使用资源循环创建 100 个虚拟机，则需要将网络接口控制器 (NIC) 关联到相应的 VM 和存储帐户。由于 VM 的数目和存储帐户的数目可能不同，因此还必须应对不同的资源循环大小。这些问题是可以解决的，不过复杂性将随着规模扩大而大幅增长。

另一项挑战发生在需要弹性缩放的基础结构时。例如，你可能想要自动缩放基础结构，以根据工作负荷自动增加或减少 VM 数目。VM 不提供改变数目（扩展和缩减）的集成机制。如果你要通过删除 VM 来达到缩减目的，即使 VM 在更新域和容错域之间保持平衡，也依然很难保证高可用性。

最后，当你使用资源循环时，将造成许多涉及到底层结构的资源创建诉求。当有许多创建类似资源的诉求出现后，Azure 将有潜力可以改善设计和实施优化，以此提升部署可靠性和性能。这正是我们引入_虚拟机缩放集_的原因。


<!---HONumber=Mooncake_0613_2016-->